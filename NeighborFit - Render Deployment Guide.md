# NeighborFit - Render Deployment Guide

## Overview
NeighborFit is a neighborhood lifestyle matching application that helps users find neighborhoods that match their preferences based on population density, parks, and restaurants.

## Project Structure
```
neighborfit_deploy/
├── main.py                                    # Main Flask application
├── neighborhood.py                            # API routes for neighborhood recommendations
├── static/                                    # Frontend files
│   ├── index.html                            # Main HTML page
│   ├── styles.css                            # CSS styles
│   └── script.js                             # JavaScript functionality
├── california_census_tracts_features.csv     # Neighborhood data
├── scaler.joblib                             # Pre-trained data scaler
├── requirements.txt                          # Python dependencies
├── Procfile                                  # Render startup command
├── render.yaml                               # Render configuration
├── runtime.txt                               # Python version specification
├── .env                                      # Environment variables
└── .gitignore                                # Git ignore rules
```

## Deployment on Render

### Method 1: Using render.yaml (Recommended)
1. Push your code to a GitHub repository
2. Connect your GitHub repository to Render
3. Render will automatically detect the `render.yaml` file and configure the service

### Method 2: Manual Configuration
1. Create a new Web Service on Render
2. Connect your GitHub repository
3. Configure the following settings:
   - **Environment**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn main:app`
   - **Python Version**: 3.11.0

### Environment Variables
Set the following environment variables in Render:
- `FLASK_ENV`: production
- `FLASK_DEBUG`: false
- `SECRET_KEY`: (auto-generated by Render or set your own)
- `CENSUS_API_KEY`: afce2dd724deac236676e317d61feae1d3696e29

## Local Development

### Prerequisites
- Python 3.11+
- pip

### Setup
1. Clone the repository
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
3. Run the application:
   ```bash
   python main.py
   ```
4. Open http://localhost:5000 in your browser

### Production Testing
Test with Gunicorn (production server):
```bash
gunicorn main:app --bind 0.0.0.0:5000
```

## API Endpoints

### Health Check
- `GET /health` - Application health status
- `GET /api/health` - API health status

### Neighborhood Recommendations
- `POST /api/neighborhoods/recommend` - Get neighborhood recommendations
  ```json
  {
    "population_density": 2000,
    "parks_per_sqkm": 5,
    "restaurants_per_sqkm": 10,
    "k": 5
  }
  ```

### Feature Information
- `GET /api/neighborhoods/features` - Get available features and their ranges

### Neighborhood Details
- `GET /api/neighborhoods/<geoid>` - Get detailed information about a specific neighborhood

## Features
- **Interactive Frontend**: Modern web interface with sliders for preference input
- **Real-time Recommendations**: Get neighborhood matches based on your preferences
- **Responsive Design**: Works on desktop and mobile devices
- **Production Ready**: Configured for deployment with proper error handling
- **Health Monitoring**: Built-in health check endpoints

## Data
- **California Census Tracts**: 8,000+ neighborhoods with demographic data
- **Features**: Population density, parks per km², restaurants per km²
- **Algorithm**: Euclidean distance matching with MinMax scaling

## Troubleshooting

### Common Issues
1. **Import Errors**: Ensure all dependencies are installed from requirements.txt
2. **File Not Found**: Verify that data files (CSV and joblib) are in the project root
3. **CORS Issues**: The app is configured with CORS enabled for all origins
4. **Port Issues**: The app automatically uses the PORT environment variable set by Render

### Logs
Check Render logs for detailed error information:
- Build logs for dependency installation issues
- Runtime logs for application errors

## Performance
- **Cold Start**: ~10-15 seconds for initial data loading
- **Response Time**: <1 second for recommendations
- **Memory Usage**: ~200MB for data and models
- **Concurrent Users**: Supports multiple concurrent requests

## Security
- Environment variables for sensitive data
- CORS properly configured
- Input validation on all API endpoints
- Error handling without exposing internal details

## Support
For deployment issues, check:
1. Render build logs
2. Application logs
3. Environment variable configuration
4. GitHub repository connection

## Version
- Python: 3.11.0
- Flask: 3.1.1
- Gunicorn: 21.2.0
- Last Updated: January 2025

